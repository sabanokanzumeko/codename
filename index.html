<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>あなたに変なコードネームをつけます</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-white to-slate-50">
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useMemo, useState } = React;

    // --- 名前リスト ----------------------------------------------------------
    const codenameList = [
      "ぶり大根",
      "竜泉寺　おゆこ",
      "ナポリげた男",
      "環状線　充",
      "ジャガーバタコ",
      "金銀堂　星男",
      "ちょーみーキティ子",
      "辛い　茄子",
      "チェーリーテンプル",
      "下駄子",
      "鈴木太郎",
      "ダンシング美智子",
      "ゴンザレス長谷川",
      "痣とイチボ",
      "厚着厚子",
      "勝どき橋　渡子",
      "ジャンボタニシ",
      "薬師寺　煎子",
      "棚からぼたこ",
      "ドリーミング吾郎"
    ];

    function hashString(str) {
      let h = 0x811c9dc5;
      for (let i = 0; i < str.length; i++) {
        h ^= str.charCodeAt(i);
        h = (h + (h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24)) >>> 0;
      }
      return h >>> 0;
    }

    function mulberry32(seed) {
      let t = seed >>> 0;
      return function () {
        t += 0x6D2B79F5;
        let r = Math.imul(t ^ (t >>> 15), 1 | t);
        r ^= r + Math.imul(r ^ (r >>> 7), 61 | r);
        return ((r ^ (r >>> 14)) >>> 0) / 4294967296;
      };
    }

    function App() {
      const [name, setName] = useState("");
      const [salt, setSalt] = useState(0);

      const result = useMemo(() => {
        const baseSeed = hashString((name || "anonymous").trim());
        const rng = mulberry32(baseSeed + salt * 99991);
        return codenameList[Math.floor(rng() * codenameList.length)];
      }, [name, salt]);

      return (
        <div className="min-h-screen w-full flex items-center justify-center p-6">
          <div className="w-full max-w-3xl">
            <div className="mb-6 text-center">
              <h1 className="text-3xl sm:text-4xl font-bold tracking-tight">Codename Generator</h1>
              <p className="text-slate-600 mt-2">入力した名前から固定シードでランダム選択されます</p>
            </div>

            <div className="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4">
              <input
                className="sm:col-span-2 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-slate-400"
                placeholder="名前を入力してください"
                value={name}
                onChange={(e) => setName(e.target.value)}
              />
              <button
                className="rounded-2xl border border-slate-200 bg-black text-white px-4 py-3 shadow-sm hover:opacity-90 active:opacity-80"
                onClick={() => setSalt(s => s + 1)}
              >コードネームを作る</button>
            </div>

            <div className="grid gap-3">
              <div className="flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm">
                <div className="text-lg font-semibold tracking-tight">{result}</div>
              </div>
            </div>

            <div className="mt-8 text-xs text-slate-500 text-center">deterministic by name • client-only • no tracking • made with 鯖の味噌煮</div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
